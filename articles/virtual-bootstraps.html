<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Virtual Bootstraps • strapgod</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Virtual Bootstraps">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">strapgod</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/dplyr-support.html">Support for dplyr</a>
    </li>
    <li>
      <a href="../articles/virtual-bootstraps.html">Virtual Bootstraps</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/DavisVaughan/strapgod">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Virtual Bootstraps</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/DavisVaughan/strapgod/blob/master/vignettes/virtual-bootstraps.Rmd"><code>vignettes/virtual-bootstraps.Rmd</code></a></small>
      <div class="hidden name"><code>virtual-bootstraps.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Random">set.seed</a></span>(<span class="dv">123</span>)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(strapgod)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dplyr)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">iris &lt;-<span class="st"> </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/reexports.html">as_tibble</a></span>(iris)</a></code></pre></div>
<div id="introduction" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h1>
<p>The goal of strapgod is to make it easy to create <em>virtual groups</em> on top of tibbles for use with resampling. This means that your tibble is grouped, but you don’t actually “materialize” the groups until you actually need them. By doing this, some computations involving large amounts of bootstraps or resamples can be made much more efficient.</p>
</div>
<div id="creating-resampled-data-frames" class="section level1">
<h1 class="hasAnchor">
<a href="#creating-resampled-data-frames" class="anchor"></a>Creating resampled data frames</h1>
<p>There are two core functions that help you generate a <code>resampled_df</code> object.</p>
<p><code><a href="../reference/bootstrapify.html">bootstrapify()</a></code> takes a data frame and bootstraps the rows of that data frame a set number of <code>times</code> to generate the virtual groups.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">iris_boot &lt;-<span class="st"> </span><span class="kw"><a href="../reference/bootstrapify.html">bootstrapify</a></span>(iris, <span class="dt">times =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nrow">nrow</a></span>(iris)</a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt; [1] 150</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nrow">nrow</a></span>(iris_boot)</a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt; [1] 150</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"></a>
<a class="sourceLine" id="cb2-8" data-line-number="8">iris_boot</a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt; # A tibble: 150 x 5</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">#&gt; # Groups:   .bootstrap [10]</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co">#&gt;    Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="co">#&gt;           &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;  </span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="co">#&gt;  1          5.1         3.5          1.4         0.2 setosa </span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#&gt;  2          4.9         3            1.4         0.2 setosa </span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="co">#&gt;  3          4.7         3.2          1.3         0.2 setosa </span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="co">#&gt;  4          4.6         3.1          1.5         0.2 setosa </span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="co">#&gt;  5          5           3.6          1.4         0.2 setosa </span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"><span class="co">#&gt;  6          5.4         3.9          1.7         0.4 setosa </span></a>
<a class="sourceLine" id="cb2-19" data-line-number="19"><span class="co">#&gt;  7          4.6         3.4          1.4         0.3 setosa </span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20"><span class="co">#&gt;  8          5           3.4          1.5         0.2 setosa </span></a>
<a class="sourceLine" id="cb2-21" data-line-number="21"><span class="co">#&gt;  9          4.4         2.9          1.4         0.2 setosa </span></a>
<a class="sourceLine" id="cb2-22" data-line-number="22"><span class="co">#&gt; 10          4.9         3.1          1.5         0.1 setosa </span></a>
<a class="sourceLine" id="cb2-23" data-line-number="23"><span class="co">#&gt; # … with 140 more rows</span></a></code></pre></div>
<p>What you’ll immediately notice is that:</p>
<ul>
<li><p>The tibble still only has 150 rows.</p></li>
<li><p>The tibble is now grouped by <code>.bootstrap</code>, which isn’t a column in the tibble.</p></li>
</ul>
<p>The invisible <code>.bootstrap</code> column is the virtual group. It hasn’t been materialized (there are still only 150 rows, not 150 * 10 rows), but dplyr still seems to know about it.</p>
<p><code><a href="../reference/samplify.html">samplify()</a></code> is the other function that can generate resampled tibbles. It is a slight generalization of <code><a href="../reference/bootstrapify.html">bootstrapify()</a></code> that also allows you to specify the size of each resample, and if you want to resample with replacement or not.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">iris_samp &lt;-<span class="st"> </span><span class="kw"><a href="../reference/samplify.html">samplify</a></span>(iris, <span class="dt">times =</span> <span class="dv">10</span>, <span class="dt">size =</span> <span class="dv">20</span>, <span class="dt">replace =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"></a>
<a class="sourceLine" id="cb3-3" data-line-number="3">iris_samp</a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt; # A tibble: 150 x 5</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt; # Groups:   .sample [10]</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt;    Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt;           &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;  </span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt;  1          5.1         3.5          1.4         0.2 setosa </span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt;  2          4.9         3            1.4         0.2 setosa </span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt;  3          4.7         3.2          1.3         0.2 setosa </span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">#&gt;  4          4.6         3.1          1.5         0.2 setosa </span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">#&gt;  5          5           3.6          1.4         0.2 setosa </span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="co">#&gt;  6          5.4         3.9          1.7         0.4 setosa </span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="co">#&gt;  7          4.6         3.4          1.4         0.3 setosa </span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="co">#&gt;  8          5           3.4          1.5         0.2 setosa </span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="co">#&gt;  9          4.4         2.9          1.4         0.2 setosa </span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="co">#&gt; 10          4.9         3.1          1.5         0.1 setosa </span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"><span class="co">#&gt; # … with 140 more rows</span></a></code></pre></div>
<p>This result:</p>
<ul>
<li><p>Has 10 resamples</p></li>
<li><p>Each one is of size 20</p></li>
<li><p>And the resampling was done without replacement each time</p></li>
</ul>
</div>
<div id="resampled-summaries" class="section level1">
<h1 class="hasAnchor">
<a href="#resampled-summaries" class="anchor"></a>Resampled summaries</h1>
<p>What can you do with these neat resampled data frames? Great question! For one thing, you can <code><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise()</a></code> the tibble to compute bootstrapped summaries quickly and efficiently.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co"># without the bootstrap</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">iris <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span>(</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">    <span class="dt">mean_length =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(Sepal.Length)</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">  )</a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="co">#&gt; # A tibble: 1 x 1</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="co">#&gt;   mean_length</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="co">#&gt;         &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="co">#&gt; 1        5.84</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="co"># with the bootstrap</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12">iris <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="st">  </span><span class="kw"><a href="../reference/bootstrapify.html">bootstrapify</a></span>(<span class="dv">10</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span>(</a>
<a class="sourceLine" id="cb4-15" data-line-number="15">    <span class="dt">mean_length =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(Sepal.Length)</a>
<a class="sourceLine" id="cb4-16" data-line-number="16">  )</a>
<a class="sourceLine" id="cb4-17" data-line-number="17"><span class="co">#&gt; # A tibble: 10 x 2</span></a>
<a class="sourceLine" id="cb4-18" data-line-number="18"><span class="co">#&gt;    .bootstrap mean_length</span></a>
<a class="sourceLine" id="cb4-19" data-line-number="19"><span class="co">#&gt;         &lt;int&gt;       &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb4-20" data-line-number="20"><span class="co">#&gt;  1          1        5.90</span></a>
<a class="sourceLine" id="cb4-21" data-line-number="21"><span class="co">#&gt;  2          2        5.80</span></a>
<a class="sourceLine" id="cb4-22" data-line-number="22"><span class="co">#&gt;  3          3        5.80</span></a>
<a class="sourceLine" id="cb4-23" data-line-number="23"><span class="co">#&gt;  4          4        5.80</span></a>
<a class="sourceLine" id="cb4-24" data-line-number="24"><span class="co">#&gt;  5          5        5.81</span></a>
<a class="sourceLine" id="cb4-25" data-line-number="25"><span class="co">#&gt;  6          6        5.84</span></a>
<a class="sourceLine" id="cb4-26" data-line-number="26"><span class="co">#&gt;  7          7        5.79</span></a>
<a class="sourceLine" id="cb4-27" data-line-number="27"><span class="co">#&gt;  8          8        5.86</span></a>
<a class="sourceLine" id="cb4-28" data-line-number="28"><span class="co">#&gt;  9          9        5.86</span></a>
<a class="sourceLine" id="cb4-29" data-line-number="29"><span class="co">#&gt; 10         10        5.86</span></a></code></pre></div>
<p>This makes it easy to compute bootstrapped estimates of individual statistics, along with bootstrapped standard deviations around those estimates.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">iris <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/bootstrapify.html">bootstrapify</a></span>(<span class="dv">10</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span>(<span class="dt">mean_length =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(Sepal.Length)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span>(</a>
<a class="sourceLine" id="cb5-5" data-line-number="5">    <span class="dt">bootstrapped_mean =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(mean_length),</a>
<a class="sourceLine" id="cb5-6" data-line-number="6">    <span class="dt">bootstrapped_sd   =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/sd">sd</a></span>(mean_length)</a>
<a class="sourceLine" id="cb5-7" data-line-number="7">  )</a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">#&gt; # A tibble: 1 x 2</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt;   bootstrapped_mean bootstrapped_sd</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"><span class="co">#&gt;               &lt;dbl&gt;           &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="co">#&gt; 1              5.83          0.0592</span></a></code></pre></div>
<p>If you want, you can take an existing grouped data frame and bootstrapify that as well, allowing you to compute bootstrapped statistics <em>across</em> some other variable.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">iris_group_strap &lt;-<span class="st"> </span>iris <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(Species) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/bootstrapify.html">bootstrapify</a></span>(<span class="dv">100</span>) </a>
<a class="sourceLine" id="cb6-4" data-line-number="4"></a>
<a class="sourceLine" id="cb6-5" data-line-number="5">iris_group_strap</a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt; # A tibble: 150 x 5</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt; # Groups:   Species, .bootstrap [300]</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt;    Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="co">#&gt;           &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;  </span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co">#&gt;  1          5.1         3.5          1.4         0.2 setosa </span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="co">#&gt;  2          4.9         3            1.4         0.2 setosa </span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="co">#&gt;  3          4.7         3.2          1.3         0.2 setosa </span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="co">#&gt;  4          4.6         3.1          1.5         0.2 setosa </span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"><span class="co">#&gt;  5          5           3.6          1.4         0.2 setosa </span></a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="co">#&gt;  6          5.4         3.9          1.7         0.4 setosa </span></a>
<a class="sourceLine" id="cb6-16" data-line-number="16"><span class="co">#&gt;  7          4.6         3.4          1.4         0.3 setosa </span></a>
<a class="sourceLine" id="cb6-17" data-line-number="17"><span class="co">#&gt;  8          5           3.4          1.5         0.2 setosa </span></a>
<a class="sourceLine" id="cb6-18" data-line-number="18"><span class="co">#&gt;  9          4.4         2.9          1.4         0.2 setosa </span></a>
<a class="sourceLine" id="cb6-19" data-line-number="19"><span class="co">#&gt; 10          4.9         3.1          1.5         0.1 setosa </span></a>
<a class="sourceLine" id="cb6-20" data-line-number="20"><span class="co">#&gt; # … with 140 more rows</span></a></code></pre></div>
<p>Reusing the code from above, we can now compute bootstrapped estimates for the mean <code>Sepal.Length</code> of each <code>Species</code>, along with standard deviations around those estimates.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">iris_group_strap <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span>(<span class="dt">mean_length =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(Sepal.Length)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span>(</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">    <span class="dt">bootstrapped_mean =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/mean">mean</a></span>(mean_length),</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">    <span class="dt">bootstrapped_sd   =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/sd">sd</a></span>(mean_length)</a>
<a class="sourceLine" id="cb7-6" data-line-number="6">  )</a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt; # A tibble: 3 x 3</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt;   Species    bootstrapped_mean bootstrapped_sd</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">#&gt;   &lt;fct&gt;                  &lt;dbl&gt;           &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="co">#&gt; 1 setosa                  5.00          0.0514</span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="co">#&gt; 2 versicolor              5.92          0.0685</span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="co">#&gt; 3 virginica               6.59          0.0969</span></a></code></pre></div>
</div>
<div id="understanding-virtual-groups" class="section level1">
<h1 class="hasAnchor">
<a href="#understanding-virtual-groups" class="anchor"></a>Understanding virtual groups</h1>
<p>The virtual groups are stored in the <code><a href="https://dplyr.tidyverse.org/reference/group_data.html">group_data()</a></code> metadata of the <code>resampled_df</code> object. Every grouped data frame has one of these, and they are used internally to power the dplyr <code><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by()</a></code> system.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_data.html">group_data</a></span>(iris_boot)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="co">#&gt; # A tibble: 10 x 2</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co">#&gt;    .bootstrap .rows      </span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#&gt;         &lt;int&gt; &lt;list&gt;     </span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co">#&gt;  1          1 &lt;int [150]&gt;</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co">#&gt;  2          2 &lt;int [150]&gt;</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co">#&gt;  3          3 &lt;int [150]&gt;</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="co">#&gt;  4          4 &lt;int [150]&gt;</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="co">#&gt;  5          5 &lt;int [150]&gt;</span></a>
<a class="sourceLine" id="cb8-10" data-line-number="10"><span class="co">#&gt;  6          6 &lt;int [150]&gt;</span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11"><span class="co">#&gt;  7          7 &lt;int [150]&gt;</span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="co">#&gt;  8          8 &lt;int [150]&gt;</span></a>
<a class="sourceLine" id="cb8-13" data-line-number="13"><span class="co">#&gt;  9          9 &lt;int [150]&gt;</span></a>
<a class="sourceLine" id="cb8-14" data-line-number="14"><span class="co">#&gt; 10         10 &lt;int [150]&gt;</span></a></code></pre></div>
<p>The <code>.bootstrap</code> column contains the unique values of the groups, and the <code>.rows</code> column is a list column, where each element is an integer vector. That integer vector holds the rows that belong to that specific group. So, for <code>.bootstrap == 1</code>, there is a vector with 150 integers identifying the rows belonging to that resample.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="https://dplyr.tidyverse.org/reference/group_data.html">group_data</a></span>(iris_boot)<span class="op">$</span>.rows[[<span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="co">#&gt;   [1]  44 119  62 133 142   7  80 134  83  69 144  69 102  86  16 135  37</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="co">#&gt;  [18]   7  50 144 134 104  97 150  99 107  82  90  44  23 145 136 104 120</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co">#&gt;  [35]   4  72 114  33  48  35  22  63  63  56  23  21  35  70  40 129   7</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co">#&gt;  [52]  67 120  19  85  31  20 113 135  57 100  15  58  42 123  68 122 122</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="co">#&gt;  [69] 120  66 114  95 107   1  72  34  57  92  53  17  37 101  63 119  16</span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co">#&gt;  [86]  66 148 134 133  27  20  98  52  99  49  29 118  15  71  77  90  50</span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="co">#&gt; [103]  74 144  73 134 138  92  62  23 141  46  10 143 109  22  83 144  88</span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="co">#&gt; [120]  61  98  48  47  33  56 148  24  14  22 104  93 134 101 111  79  99</span></a>
<a class="sourceLine" id="cb9-10" data-line-number="10"><span class="co">#&gt; [137] 124 118 147  66  47  62   2  28 127  35  36  12  37 110</span></a></code></pre></div>
<p>When a call to <code><a href="https://dplyr.tidyverse.org/reference/compute.html">collect()</a></code> is made, this row index information is used to construct the output. Essentially, we start with the <code><a href="https://dplyr.tidyverse.org/reference/group_data.html">group_data()</a></code> and utilize the <code>.rows</code> info to replicate the rows of the original data frame for each group, building up the complete resampled data frame. Notice how we now have the <code>150 * 10 = 1500</code> rows from the 10 bootstraps.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="https://dplyr.tidyverse.org/reference/compute.html">collect</a></span>(iris_boot)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="co">#&gt; # A tibble: 1,500 x 6</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="co">#&gt; # Groups:   .bootstrap [10]</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="co">#&gt;    .bootstrap Sepal.Length Sepal.Width Petal.Length Petal.Width Species   </span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="co">#&gt;         &lt;int&gt;        &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;       &lt;dbl&gt; &lt;fct&gt;     </span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="co">#&gt;  1          1          5           3.5          1.6         0.6 setosa    </span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co">#&gt;  2          1          7.7         2.6          6.9         2.3 virginica </span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="co">#&gt;  3          1          5.9         3            4.2         1.5 versicolor</span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="co">#&gt;  4          1          6.4         2.8          5.6         2.2 virginica </span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="co">#&gt;  5          1          6.9         3.1          5.1         2.3 virginica </span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="co">#&gt;  6          1          4.6         3.4          1.4         0.3 setosa    </span></a>
<a class="sourceLine" id="cb10-12" data-line-number="12"><span class="co">#&gt;  7          1          5.7         2.6          3.5         1   versicolor</span></a>
<a class="sourceLine" id="cb10-13" data-line-number="13"><span class="co">#&gt;  8          1          6.3         2.8          5.1         1.5 virginica </span></a>
<a class="sourceLine" id="cb10-14" data-line-number="14"><span class="co">#&gt;  9          1          5.8         2.7          3.9         1.2 versicolor</span></a>
<a class="sourceLine" id="cb10-15" data-line-number="15"><span class="co">#&gt; 10          1          6.2         2.2          4.5         1.5 versicolor</span></a>
<a class="sourceLine" id="cb10-16" data-line-number="16"><span class="co">#&gt; # … with 1,490 more rows</span></a></code></pre></div>
<p>To learn more about <code><a href="https://dplyr.tidyverse.org/reference/compute.html">collect()</a></code>, and the other supported dplyr functions in strapgod, read the <code><a href="../articles/dplyr-support.html">vignette("dplyr-support", "strapgod")</a></code>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#creating-resampled-data-frames">Creating resampled data frames</a></li>
      <li><a href="#resampled-summaries">Resampled summaries</a></li>
      <li><a href="#understanding-virtual-groups">Understanding virtual groups</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Davis Vaughan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
